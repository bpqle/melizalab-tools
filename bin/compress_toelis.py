#!/usr/bin/env python
# -*- coding: iso-8859-1 -*-
"""
Collects and compresses toelis files generated by aspikes during
data acquisition.  For all subdirectories of the current directory,
runs the command 'find . -name "*.toe_lis" -print | zip -Tm toelis_orig -@

"""

import os, glob

if __name__=="__main__":

    cwd = os.getcwd()
    fls = os.listdir(cwd)
    for f in fls:
        dir = os.path.join(cwd, f)
        if not os.path.isdir(dir):
            continue
        print "Checking %s" % dir
        os.chdir(dir)
        if len(glob.glob('*.toe_lis')) > 0:
            cmd = "find . -name '*.toe_lis' -print | zip -Tm toelis_orig -@"
            os.system(cmd)
